{"version":3,"file":"emotion.umd.min.js","sources":["../src/create-broadcast.js","../src/channel.js","../src/utils.js","../src/theme-provider.js","../../../node_modules/hoist-non-react-statics/index.js","../src/with-theme.js"],"sourcesContent":["// @flow\n// https://github.com/styled-components/styled-components/blob/e05b3fe247e9d956bcde786cec376e32afb85bca/src/utils/create-broadcast.js\nconst createBroadcast = (initialState: any) => {\n  const listeners: { [number]: Function | void } = {}\n  let id = 0\n  let state = initialState\n\n  function publish(nextState: any) {\n    state = nextState\n\n    for (const key in listeners) {\n      // $FlowFixMe\n      const listener = listeners[key]\n      if (listener === undefined) {\n        continue\n      }\n\n      listener(state)\n    }\n  }\n\n  function subscribe(listener: any) {\n    const currentId = id\n    listeners[currentId] = listener\n    id += 1\n    listener(state)\n    return currentId\n  }\n\n  function unsubscribe(unsubID: number) {\n    listeners[unsubID] = undefined\n  }\n\n  return { publish, subscribe, unsubscribe }\n}\n\nexport default createBroadcast\n","// @flow\nexport default '__EMOTION_THEMING__'\n","// @flow\nimport PropTypes from 'prop-types'\nimport channel from './channel'\n\nexport const contextTypes = {\n  [channel]: PropTypes.object\n}\n\nexport { default as channel } from './channel'\nexport { default as createBroadcast } from './create-broadcast'\n\nexport type Theme = Object | ((theme: Object) => Object)\n","// @flow\n// adapted from styled-components' ThemeProvider\n// https://github.com/styled-components/styled-components/blob/4503cab5b86aa9ef8314c5baa360a2fbb4812485/src/models/ThemeProvider.js\n\nimport { Component, Children, type Node as ReactNode } from 'react'\nimport createBroadcast from './create-broadcast'\nimport { channel, contextTypes, type Theme } from './utils'\n\nconst isPlainObject = test =>\n  Object.prototype.toString.call(test) === '[object Object]'\n\ntype Props = {\n  theme: Theme,\n  children: ReactNode\n}\n\nclass ThemeProvider extends Component<Props> {\n  getTheme: ThemeProvider.prototype.getTheme\n  constructor() {\n    super()\n    this.getTheme = this.getTheme.bind(this)\n  }\n  outerTheme: Object\n  broadcast: *\n  unsubscribeToOuterId: number\n  componentWillMount() {\n    // If there is a ThemeProvider wrapper anywhere around this theme provider, merge this theme\n    // with the outer theme\n    if (this.context[channel] !== undefined) {\n      this.unsubscribeToOuterId = this.context[channel].subscribe(theme => {\n        this.outerTheme = theme\n\n        if (this.broadcast !== undefined) {\n          this.publish(this.props.theme)\n        }\n      })\n    }\n\n    this.broadcast = createBroadcast(this.getTheme(this.props.theme))\n  }\n\n  getChildContext() {\n    return {\n      [channel]: {\n        subscribe: this.broadcast.subscribe,\n        unsubscribe: this.broadcast.unsubscribe\n      }\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (this.props.theme !== nextProps.theme) {\n      this.publish(nextProps.theme)\n    }\n  }\n\n  componentWillUnmount() {\n    const themeContext = this.context[channel]\n    if (themeContext !== undefined) {\n      themeContext.unsubscribe(this.unsubscribeToOuterId)\n    }\n  }\n\n  // Get the theme from the props, supporting both (outerTheme) => {} as well as object notation\n  getTheme(theme: Theme) {\n    if (typeof theme === 'function') {\n      const mergedTheme = theme(this.outerTheme)\n      if (!isPlainObject(mergedTheme)) {\n        throw new Error(\n          '[ThemeProvider] Please return an object from your theme function, i.e. theme={() => ({})}!'\n        )\n      }\n      return mergedTheme\n    }\n    if (!isPlainObject(theme)) {\n      throw new Error(\n        '[ThemeProvider] Please make your theme prop a plain object'\n      )\n    }\n\n    if (this.outerTheme === undefined) {\n      return theme\n    }\n\n    return { ...this.outerTheme, ...theme }\n  }\n\n  publish(theme: Theme) {\n    this.broadcast.publish(this.getTheme(theme))\n  }\n\n  render() {\n    if (!this.props.children) {\n      return null\n    }\n    return Children.only(this.props.children)\n  }\n}\n\nThemeProvider.childContextTypes = contextTypes\nThemeProvider.contextTypes = contextTypes\n\nexport default ThemeProvider\n","/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.hoistNonReactStatics = factory());\n}(this, (function () {\n    'use strict';\n    \n    var REACT_STATICS = {\n        childContextTypes: true,\n        contextTypes: true,\n        defaultProps: true,\n        displayName: true,\n        getDefaultProps: true,\n        getDerivedStateFromProps: true,\n        mixins: true,\n        propTypes: true,\n        type: true\n    };\n    \n    var KNOWN_STATICS = {\n        name: true,\n        length: true,\n        prototype: true,\n        caller: true,\n        callee: true,\n        arguments: true,\n        arity: true\n    };\n    \n    var defineProperty = Object.defineProperty;\n    var getOwnPropertyNames = Object.getOwnPropertyNames;\n    var getOwnPropertySymbols = Object.getOwnPropertySymbols;\n    var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n    var getPrototypeOf = Object.getPrototypeOf;\n    var objectPrototype = getPrototypeOf && getPrototypeOf(Object);\n    \n    return function hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n        if (typeof sourceComponent !== 'string') { // don't hoist over string (html) components\n            \n            if (objectPrototype) {\n                var inheritedComponent = getPrototypeOf(sourceComponent);\n                if (inheritedComponent && inheritedComponent !== objectPrototype) {\n                    hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n                }\n            }\n            \n            var keys = getOwnPropertyNames(sourceComponent);\n            \n            if (getOwnPropertySymbols) {\n                keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n            }\n            \n            for (var i = 0; i < keys.length; ++i) {\n                var key = keys[i];\n                if (!REACT_STATICS[key] && !KNOWN_STATICS[key] && (!blacklist || !blacklist[key])) {\n                    var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n                    try { // Avoid failures from read-only properties\n                        defineProperty(targetComponent, key, descriptor);\n                    } catch (e) {}\n                }\n            }\n            \n            return targetComponent;\n        }\n        \n        return targetComponent;\n    };\n})));\n","// @flow\nimport * as React from 'react'\nimport hoistNonReactStatics from 'hoist-non-react-statics'\nimport { channel, contextTypes } from './utils'\n\ntype Props = { theme: Object }\n\nconst withTheme = (Component: React.ComponentType<Props>) => {\n  const componentName = Component.displayName || Component.name || 'Component'\n\n  class WithTheme extends React.Component<{}, { theme: Object }> {\n    unsubscribeId: number\n    componentWillMount() {\n      const themeContext = this.context[channel]\n      if (themeContext === undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\n          '[withTheme] Please use ThemeProvider to be able to use withTheme'\n        )\n        return\n      }\n      this.unsubscribeId = themeContext.subscribe(theme => {\n        this.setState({ theme })\n      })\n    }\n\n    componentWillUnmount() {\n      if (this.unsubscribeId !== -1) {\n        this.context[channel].unsubscribe(this.unsubscribeId)\n      }\n    }\n\n    render() {\n      return <Component theme={this.state.theme} {...this.props} />\n    }\n  }\n  WithTheme.displayName = `WithTheme(${componentName})`\n  WithTheme.contextTypes = contextTypes\n\n  return hoistNonReactStatics(WithTheme, Component)\n}\n\nexport default withTheme\n"],"names":["createBroadcast","initialState","listeners","id","state","nextState","key","listener","undefined","currentId","unsubID","contextTypes","channel","PropTypes","object","isPlainObject","Object","prototype","toString","call","test","ThemeProvider","getTheme","_this","bind","componentWillMount","this","context","unsubscribeToOuterId","subscribe","outerTheme","theme","_this2","broadcast","publish","props","getChildContext","unsubscribe","componentWillReceiveProps","nextProps","componentWillUnmount","themeContext","mergedTheme","Error","render","children","Children","only","childContextTypes","Component","REACT_STATICS","KNOWN_STATICS","defineProperty","getOwnPropertyNames","getOwnPropertySymbols","getOwnPropertyDescriptor","getPrototypeOf","objectPrototype","module","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","keys","concat","i","length","descriptor","e","componentName","displayName","name","WithTheme","unsubscribeId","setState","error","React.createElement","React"],"mappings":"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"}